<div class="management-section">
  <div class="section-header d-flex justify-content-between align-items-center mb-4">
    <h3 class="fw-bold">Vehicle Management</h3>
    <button class="btn btn-primary btn-sm" (click)="showForm = !showForm" *ngIf="!showForm">+ Add Vehicle</button>
  </div>

  <!-- Add/Edit Form -->
  <div class="card p-4 mb-4" *ngIf="showForm">
    <form #vehicleForm="ngForm" (ngSubmit)="addVehicle(vehicleForm)">
      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">Model</label>
          <input type="text" name="model" class="form-control" [(ngModel)]="newVehicle.model" required #modelField="ngModel" [class.is-invalid]="isSubmitted && modelField.invalid" />
          <div class="invalid-feedback d-block" *ngIf="isSubmitted && modelField.invalid">Model is required</div>
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label">Type</label>
          <select name="type" class="form-control" [(ngModel)]="newVehicle.type" required #typeField="ngModel" [class.is-invalid]="isSubmitted && typeField.invalid">
            <option value="SUV">SUV</option>
            <option value="Jeep">Jeep</option>
            <option value="Van">Van</option>
            <option value="Car">Car</option>
          </select>
          <div class="invalid-feedback d-block" *ngIf="isSubmitted && typeField.invalid">Type is required</div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label">Price Per Day ($)</label>
          <input type="number" name="price_per_day" class="form-control" [(ngModel)]="newVehicle.price_per_day" required min="0" #priceField="ngModel" [class.is-invalid]="isSubmitted && priceField.invalid" />
          <div class="invalid-feedback d-block" *ngIf="isSubmitted && priceField.invalid">Valid price is required</div>
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label">Status</label>
          <select name="status" class="form-control" [(ngModel)]="newVehicle.status" required #statusField="ngModel" [class.is-invalid]="isSubmitted && statusField.invalid">
            <option value="available">Available</option>
            <option value="unavailable">Unavailable</option>
          </select>
          <div class="invalid-feedback d-block" *ngIf="isSubmitted && statusField.invalid">Status is required</div>
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label">Image URL</label>
        <input type="url" name="imageUrl" class="form-control" [(ngModel)]="newVehicle.imageUrl" required #imageField="ngModel" [class.is-invalid]="isSubmitted && imageField.invalid" />
        <div class="invalid-feedback d-block" *ngIf="isSubmitted && imageField.invalid">Valid image URL is required</div>
      </div>

      <div class="d-flex gap-2">
        <button type="submit" class="btn btn-success">{{ editingId ? 'Update' : 'Add' }} Vehicle</button>
        <button type="button" class="btn btn-secondary" (click)="cancelForm()">Cancel</button>
      </div>
    </form>
  </div>

  <!-- Vehicles Table -->
  <div class="table-responsive">
    <table class="table table-hover table-bordered">
      <thead class="table-light">
        <tr>
          <th>Model</th>
          <th>Type</th>
          <th>Price/Day</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let vehicle of vehicles">
          <td>{{ vehicle.model }}</td>
          <td>{{ vehicle.type }}</td>
          <td>${{ vehicle.price_per_day }}</td>
          <td><span [ngClass]="vehicle.status === 'available' ? 'badge bg-success' : 'badge bg-danger'">{{ vehicle.status }}</span></td>
          <td>
            <button class="btn btn-sm btn-primary me-2" (click)="editVehicle(vehicle)">Edit</button>
            <button class="btn btn-sm btn-danger" (click)="deleteVehicle(vehicle.id)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
